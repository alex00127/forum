<h1>Profile</h1>

<%= link_to "Edit", user_profile_path(@user, :user_profile => @user.profile ) , :class => "btn btn-default"%></td>

<h2>個人資料:</h2>

<% if params[:user_profile]%>
  
  <%= form_for @profile, :url => user_profile_path(:user_profile => @user.profile), :method => :patch do |f| %>
    <div class="form-group">
      <%= f.label :first_name, "First_Name" %>
      <%= f.text_field :first_name , :class => "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :last_name, "Last_Name" %>
      <%= f.text_field :last_name , :class => "form-control" %>
    </div>



    <div class="form-group">
      <%= f.label :about_me, "About Me" %>
      <%= f.text_area :about_me , :class => "form-control"%>
    </div>

  <%= f.submit "Save", :class => "btn btn-primary" %>
  <%end%>



<%else%>

  <ul>
    <p>
    <li>User ID: <%= @user.try(:user_name)%> </li>
    <li>Email: <%= @user.try(:email)%> </li>
    </p>

    <li>First_name: <%= @profile.try(:first_name)%> </li>
    <li>Last_name: <%= @profile.try(:last_name)%> </li>
    <li>Birth: <%= @profile.try(:birth) %></li>
    <li>Sex: <%= @profile.try(:sex) %></li>
    <li>About Me: <%= @profile.try(:about_me)%> </li>
    </ul>
<%end%>

   <h2>發表過的文章:</h2>
     <ul>
     <% @user.topics.each do |t|%>
       <li><%= link_to t.title, topic_path(t) %></li>
     <% end %>
     </ul>


   <h2>發表過的回覆:</h2>
        <ul>
     <% @user.comments.each do |c|%>
       <li>曾經於"<%= link_to c.topic.title, topic_path(c.topic) %>"文章</li>
       <p>回應:<%= "  " + c.content %></p>

     <% end %>
     </ul>




<p><%= link_to "Back To Index", topics_path %></p>

