<h1>AlphaCamp Forum</h1>

<%= form_tag topics_path, :method => :get do %>
  <%= text_field_tag "keyword" %>
  <%= submit_tag "Search" %>
<% end %>


<p><%= link_to "New Post", new_topic_path() , :class => "btn btn-primary"%></p>
<p>
<%= link_to 'Sort by Title', topics_path( :order => "title") %>
<%= link_to 'Sort by last Comment Time', topics_path %>
</p>
<table>
  <tr>
      <td><h4>文章主題</h4></td>
      <td><h4>作者</h4></td>      
      <td><h4>回應數</h4></td>
      <td><h4>最新回應</h4></td>

  </tr>
  <% @topics.each do |t| %>
    <tr>
      <td><h4><%= link_to t.title, topic_path(t)%></h4></td>
      <td>
        <%= t.user.try(:user_name) %>
        <%= t.created_at %>
      </td>
      <td><%= t.comments.size %></td>
      <td><%= t.comments.last.try(:created_at) %></td>
      <td><%= link_to "Edit", edit_topic_path(t) , :class => "btn btn-default"%></td>
      <td><%= link_to "Delete", topic_path(t) ,:method => :delete, :class => "btn btn-danger"%></td>
    </tr>
  <% end %>

</table>
<%= paginate @topics %>
